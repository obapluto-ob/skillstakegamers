{% extends "base.html" %}\n\n{% block content %}\n<div class=\"container mt-4\">\n    <div class=\"row\">\n        <div class=\"col-12\">\n            <div class=\"card\">\n                <div class=\"card-header d-flex justify-content-between align-items-center\">\n                    <h4><span style=\"color: #dc3545;\">📹</span> My Stream Replays</h4>\n                    <a href=\"/live_streams\" class=\"btn btn-primary btn-sm\">Go Live</a>\n                </div>\n                <div class=\"card-body\">\n                    {% if replays %}\n                        <div class=\"row\">\n                            {% for replay in replays %}\n                            <div class=\"col-md-6 col-lg-4 mb-4\">\n                                <div class=\"card h-100\" style=\"border-radius: 15px; overflow: hidden;\">\n                                    <div style=\"height: 200px; background: linear-gradient(45deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem;\">\n                                        🎮\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <h6 class=\"card-title\">{{ replay[3] or 'Gaming Stream' }}</h6>\n                                        <div class=\"mb-2\">\n                                            <small class=\"text-muted\">\n                                                <strong>Duration:</strong> {{ replay[4] }} minutes<br>\n                                                <strong>Peak Viewers:</strong> {{ replay[5] }}<br>\n                                                <strong>Earnings:</strong> KSh {{ \"%.0f\"|format(replay[6] or 0) }}\n                                            </small>\n                                        </div>\n                                        <div class=\"d-flex justify-content-between align-items-center\">\n                                            <small class=\"text-muted\">{{ replay[8][:10] }}</small>\n                                            <div>\n                                                <button class=\"btn btn-sm btn-outline-primary\" onclick=\"viewReplayStats({{ replay[0] }})\">\n                                                    📊 Stats\n                                                </button>\n                                                <button class=\"btn btn-sm btn-outline-danger\" onclick=\"deleteReplay({{ replay[0] }})\">\n                                                    🗑️\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            {% endfor %}\n                        </div>\n                    {% else %}\n                        <div class=\"text-center py-5\">\n                            <div style=\"font-size: 4rem; color: #ccc;\">📹</div>\n                            <h5 class=\"text-muted\">No Stream Replays Yet</h5>\n                            <p class=\"text-muted\">Start streaming to build your replay library!</p>\n                            <a href=\"/live_streams\" class=\"btn btn-primary\">Start Streaming</a>\n                        </div>\n                    {% endif %}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- Replay Stats Modal -->\n<div class=\"modal fade\" id=\"replayStatsModal\" tabindex=\"-1\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">📊 Stream Statistics</h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n            </div>\n            <div class=\"modal-body\" id=\"replayStatsContent\">\n                Loading...\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\nfunction viewReplayStats(replayId) {\n    // Show detailed stats for the replay\n    const modal = new bootstrap.Modal(document.getElementById('replayStatsModal'));\n    document.getElementById('replayStatsContent').innerHTML = `\n        <div class=\"text-center\">\n            <div class=\"spinner-border\" role=\"status\"></div>\n            <p>Loading replay statistics...</p>\n        </div>\n    `;\n    modal.show();\n    \n    // Simulate loading stats\n    setTimeout(() => {\n        document.getElementById('replayStatsContent').innerHTML = `\n            <div class=\"row text-center\">\n                <div class=\"col-6\">\n                    <h4 class=\"text-primary\">📈 Performance</h4>\n                    <p><strong>Engagement Rate:</strong> 85%</p>\n                    <p><strong>Chat Messages:</strong> 47</p>\n                    <p><strong>Average Watch Time:</strong> 12 min</p>\n                </div>\n                <div class=\"col-6\">\n                    <h4 class=\"text-success\">💰 Earnings</h4>\n                    <p><strong>Base Earnings:</strong> KSh 45</p>\n                    <p><strong>Viewer Bonus:</strong> KSh 28</p>\n                    <p><strong>Engagement Bonus:</strong> KSh 15</p>\n                </div>\n            </div>\n            <hr>\n            <div class=\"text-center\">\n                <h5>🏆 Achievements</h5>\n                <span class=\"badge bg-success me-2\">First Stream</span>\n                <span class=\"badge bg-primary me-2\">10+ Viewers</span>\n                <span class=\"badge bg-warning\">30+ Minutes</span>\n            </div>\n        `;\n    }, 1500);\n}\n\nfunction deleteReplay(replayId) {\n    if (confirm('Delete this replay? This action cannot be undone.')) {\n        fetch('/delete_replay/' + replayId, { method: 'DELETE' })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    location.reload();\n                } else {\n                    alert('Failed to delete replay');\n                }\n            });\n    }\n}\n</script>\n{% endblock %}