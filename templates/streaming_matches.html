{% extends "base.html" %}

{% block content %}
<div class="card" style="background: linear-gradient(135deg, #dc3545, #fd7e14); color: white; border: none;">
    <h1>BROADCAST MODE</h1>
    <p>Professional streaming infrastructure - Showcase skills, engage audiences, maximize earnings</p>
</div>

<div class="games-grid">
    {% for game in games %}
    {% if game.get('streaming') %}
    <div class="game-card" style="border: 2px solid #dc3545;">
        <div style="position: absolute; top: 10px; right: 10px; background: #dc3545; color: white; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.8rem; font-weight: bold;">
            BONUS +KSh{{ game.get('stream_bonus', 0) }}
        </div>
        <img src="{{ game.image }}" alt="{{ game.name }}" style="width: 100%; height: 120px; object-fit: contain; border-radius: 8px; margin-bottom: 1rem; background: rgba(255,255,255,0.1);">
        <h3>{{ game.name }} LIVE</h3>
        <p>Min: KSh {{ game.min_bet }} | Max: KSh {{ game.max_bet }}</p>
        <p style="color: #dc3545; font-size: 0.9rem; font-weight: bold;">PERFORMANCE BONUS: +KSh {{ game.get('stream_bonus', 0) }}</p>
        <p style="color: #666; font-size: 0.9rem;">Balance: KSh {{ "%.0f"|format(session.balance if session.balance else 0) }}</p>
        
        <form method="POST" action="{{ url_for('create_match') }}">
            <input type="hidden" name="game" value="{{ game.id }}">
            <input type="hidden" name="verification_type" value="streaming">
            <input type="hidden" name="enable_streaming" value="1">
            <input type="number" name="bet_amount" placeholder="Bet Amount" min="{{ game.min_bet }}" max="{{ game.max_bet }}" required style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; background: #333; color: white; border: 1px solid #555; border-radius: 4px;">
            <select name="game_mode" required style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; background: #333; color: white; border: 1px solid #555; border-radius: 4px;">
                <option value="">Select Mode</option>
                {% for mode in game.modes %}
                <option value="{{ mode }}">{{ mode }}</option>
                {% endfor %}
            </select>
            <select name="match_type" style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; background: #333; color: white; border: 1px solid #555; border-radius: 4px;">
                <option value="public">Public Broadcast</option>
                <option value="friends_only">Friends Only</option>
            </select>
            <button type="submit" class="btn" style="width: 100%; margin-bottom: 0.5rem; background: #dc3545; color: white;">INITIATE BROADCAST</button>
            <a href="/stream_setup/1" class="btn" style="width: 100%; background: #28a745; color: white; text-decoration: none; display: block; text-align: center;">CONFIGURE SYSTEM</a>
        </form>
    </div>
    {% endif %}
    {% endfor %}
</div>

<div class="card">
    <h2>ðŸ”´ Active Streams</h2>
    <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
        <a href="/live_streams" class="btn btn-primary">View All Streams</a>
        <a href="/multi_stream/1" class="btn btn-info">Multi-Stream View</a>
    </div>
</div>
{% endblock %}